type Contact {
  id: ID! @id
  username: String! @unique
  phone: String! @unique
  name: String!
  avatar: String!
  cover: String!
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  messagesSent: [Message!]! @relation(name: "Sender", onDelete: CASCADE)
  messagesReceived: [Message!]! @relation(name: "Receiver", onDelete: CASCADE)
}

type Message {
  id: ID! @id
  date: DateTime!
  text: String!
  from: Contact! @relation(link: INLINE, name: "Sender")
  to: Contact! @relation(link: INLINE, name: "Receiver")
}

type History {
  id: ID! @id
  start: Message! @relation(name: "StartMessage")
  end: Message! @relation(name: "EndMessage")
}

type Snapshot {
  id: ID! @id
  conversations: [History!]!
}